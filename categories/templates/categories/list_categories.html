{% extends "global/base.html" %} 

{% block title %}Lista de Categorias{% endblock title %} 

{% block head %}
    <!-- JQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>

    <!-- DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/jquery.dataTables.css" />

    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.js"></script>

    <!-- DataTables Bootstrap -->
    <script src="https://cdn.datatables.net/1.13.7/js/dataTables.bootstrap5.min.js"></script>
{% endblock head %}

{% block content %}
    <main>
        <div class="container">
            {% if categories %}
            <table class="table text-center table-bordered table-hover" style="width: 100%;" id="categoryTable">
                <thead class="table-dark">
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Nome da Categoria</th>
                        <th scope="col">Cor</th>
                        <th scope="col">Ações</th>
                    </tr>
                </thead>

                <tbody style="vertical-align: middle;">
                    {% for category in categories %}
                        <tr>
                            <th scope="row">
                                <a class="link-underline link-underline-opacity-0 link-dark fw-bold" href="{% url "edit_category" category.id %}">{{ forloop.counter }}</a>
                            </th>
                            <td>
                                <a class="link-underline link-underline-opacity-0 link-dark fw-medium" href="{% url "edit_category" category.id %}">{{ category.name }}</a>
                            </td>
                            <td>{{ category.color }}</td>
                            <td>
                                <a href="{% url "delete_category" category.id %}" onclick="return confirm('Tem certeza que deseja excluir esta categoria?');"><i class="bi bi-x-circle-fill"></i></a>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p class="text-center mt-4">Nenhuma categoria encontrada. Comece adicionando uma nova categoria!</p>
        {% endif %}
        </div>
    </main>

    <script>
        $(document).ready( function () {
            var table = $('#categoryTable');

            table.DataTable({
                    searching: false,
                    paging: false,
                    select: true,
                    ordering: true,
                    scrollY: 300,
                    language: {
                        "lengthMenu": "Mostrando _MENU_ registros por página",
                        "info": "Mostrando página _PAGE_ de _PAGES_",
                        ""
                    }
            })
        })
    </script>
{% endblock content %}
